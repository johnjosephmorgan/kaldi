+ set -e -o pipefail
+ boost_sil=1.0
+ chunk_width=150
+ cmd=run.pl
+ common_egs_dir=
+ decode_lang_list=(tunisian_msa)
+ dir=exp/chain2_multi
+ egs_dir_list='exp/chain2_multi/tunisian_msa_processed_egs exp/chain2_multi/mini_librispeech_processed_egs exp/chain2_multi/heroico_processed_egs exp/chain2_multi/wsj_processed_egs exp/chain2_multi/sprakbanken_processed_egs'
+ extra_left_context=50
+ extra_right_context=0
+ final_effective_lrate=0.0001
+ frame_subsampling_factor=3
+ gmm=tri3b
+ initial_effective_lrate=0.001
+ lang2weight=0.2,0.2,0.2,0.2,0.2
+ lang_list=(tunisian_msa mini_librispeech heroico wsj sprakbanken)
+ langdir=data/lang
+ lda_mllt_lang=tunisian_msa
+ max_param_change=2.0
+ nj=30
+ numGaussUBM=512
+ num_jobs_final=1
+ num_jobs_initial=1
+ num_langs=5
+ srand=-1
+ stage=-1
+ train_set=train
+ train_stage=-10
+ xent_regularize=0.1
+ . ./path.sh
+++ pwd
++ export KALDI_ROOT=/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../..
++ KALDI_ROOT=/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../..
++ export PATH=/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/utils/:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../tools/openfst/bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e:/usr/local/opt/openjdk@8/bin:/usr/local/opt/openjdk/bin:/usr/local/opt/openjdk@8/bin:/usr/local/opt/openjdk/bin:/Users/john/.nvm/versions/node/v10.23.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Applications/Emacs.app/Contents/MacOS/bin-x86_64-10_14:/Applications/Emacs.app/Contents/MacOS/libexec-x86_64-10_14
++ PATH=/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/utils/:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../tools/openfst/bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e:/usr/local/opt/openjdk@8/bin:/usr/local/opt/openjdk/bin:/usr/local/opt/openjdk@8/bin:/usr/local/opt/openjdk/bin:/Users/john/.nvm/versions/node/v10.23.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Applications/Emacs.app/Contents/MacOS/bin-x86_64-10_14:/Applications/Emacs.app/Contents/MacOS/libexec-x86_64-10_14
++ '[' '!' -f /Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../tools/config/common_path.sh ']'
++ . /Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../tools/config/common_path.sh
+++ '[' -z /Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../.. ']'
+++ export PATH=/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/chainbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/featbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/fgmmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/fstbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/gmmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/ivectorbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/kwsbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/latbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/lmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/nnet2bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/nnet3bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/nnetbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/online2bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/onlinebin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/rnnlmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/sgmm2bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/sgmmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/tfrnnlmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/cudadecoderbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/utils/:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../tools/openfst/bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e:/usr/local/opt/openjdk@8/bin:/usr/local/opt/openjdk/bin:/usr/local/opt/openjdk@8/bin:/usr/local/opt/openjdk/bin:/Users/john/.nvm/versions/node/v10.23.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Applications/Emacs.app/Contents/MacOS/bin-x86_64-10_14:/Applications/Emacs.app/Contents/MacOS/libexec-x86_64-10_14
+++ PATH=/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/chainbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/featbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/fgmmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/fstbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/gmmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/ivectorbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/kwsbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/latbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/lmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/nnet2bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/nnet3bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/nnetbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/online2bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/onlinebin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/rnnlmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/sgmm2bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/sgmmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/tfrnnlmbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../src/cudadecoderbin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/utils/:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e/../../../tools/openfst/bin:/Users/john/kaldi_jjm/egs/tunisian_msa/s5e:/usr/local/opt/openjdk@8/bin:/usr/local/opt/openjdk/bin:/usr/local/opt/openjdk@8/bin:/usr/local/opt/openjdk/bin:/Users/john/.nvm/versions/node/v10.23.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Applications/Emacs.app/Contents/MacOS/bin-x86_64-10_14:/Applications/Emacs.app/Contents/MacOS/libexec-x86_64-10_14
++ export LC_ALL=C
++ LC_ALL=C
+ . ./cmd.sh
++ export 'train_cmd=run.pl --mem 2G'
++ train_cmd='run.pl --mem 2G'
++ export 'decode_cmd=run.pl --mem 4G'
++ decode_cmd='run.pl --mem 4G'
++ export 'mkgraph_cmd=run.pl --mem 8G'
++ mkgraph_cmd='run.pl --mem 8G'
++ export 'cuda_cmd=run.pl --gpu 1'
++ cuda_cmd='run.pl --gpu 1'
+ . ./utils/parse_options.sh
++ (( argpos=1 ))
++ (( argpos<2 ))
++ '[' --stage == --config ']'
++ (( argpos++ ))
++ (( argpos<2 ))
++ true
++ '[' -z --stage ']'
++ case "$1" in
+++ echo --stage
+++ sed 's/^--//'
+++ sed s/-/_/g
++ name=stage
++ eval '[ -z "${stage+xxx}" ]'
+++ '[' -z xxx ']'
+++ eval echo '$stage'
++++ echo -1
++ oldval=-1
++ '[' -1 == true ']'
++ '[' -1 == false ']'
++ was_bool=false
++ eval 'stage="14"'
+++ stage=14
++ false
++ shift 2
++ true
++ '[' -z '' ']'
++ break
++ '[' '!' -z xxx ']'
++ '[' -z run.pl ']'
++ true
+ cuda-compiled
+ cat
This script is intended to be used with GPUs but you have not compiled Kaldi with CUDA
If you want to use GPUs (and have them), go to src/, and configure and make on a machine
where "nvcc" is installed.
+ '[' 14 -le 0 ']'
+ '[' 14 -le 1 ']'
+ '[' 14 -le 2 ']'
+ '[' 14 -le 3 ']'
+ '[' 14 -le 4 ']'
+ '[' 14 -le 5 ']'
+ '[' 14 -le 6 ']'
++ basename exp/chain2_multi
+ dir_basename=chain2_multi
+ for lang in '${lang_list[@]}'
+ multi_lores_data_dirs[${lang}]=data/tunisian_msa/train_sp
+ multi_data_dirs[${lang}]=data/tunisian_msa/train_sp_hires
+ multi_egs_dirs[${lang}]=exp/tunisian_msa/egs
+ multi_ali_dirs[${lang}]=exp/tunisian_msa
+ multi_ivector_dirs[${lang}]=exp/tunisian_msa/ivectors_train_sp_hires
+ multi_ali_treedirs[${lang}]=exp/tunisian_msa
+ multi_ali_latdirs[${lang}]=exp/tunisian_msa/chain/tri3b_train_sp_lats
+ multi_lang[${lang}]=data/tunisian_msa/lang
+ multi_lfmmi_lang[${lang}]=data/tunisian_msa/lang_chain
+ multi_gmm_dir[${lang}]=exp/tunisian_msa/tri3b
+ multi_chain_dir[${lang}]=exp/tunisian_msa/chain/chain2_multi
+ for lang in '${lang_list[@]}'
+ multi_lores_data_dirs[${lang}]=data/mini_librispeech/train_sp
+ multi_data_dirs[${lang}]=data/mini_librispeech/train_sp_hires
+ multi_egs_dirs[${lang}]=exp/mini_librispeech/egs
+ multi_ali_dirs[${lang}]=exp/mini_librispeech
+ multi_ivector_dirs[${lang}]=exp/mini_librispeech/ivectors_train_sp_hires
+ multi_ali_treedirs[${lang}]=exp/mini_librispeech
+ multi_ali_latdirs[${lang}]=exp/mini_librispeech/chain/tri3b_train_sp_lats
+ multi_lang[${lang}]=data/mini_librispeech/lang
+ multi_lfmmi_lang[${lang}]=data/mini_librispeech/lang_chain
+ multi_gmm_dir[${lang}]=exp/mini_librispeech/tri3b
+ multi_chain_dir[${lang}]=exp/mini_librispeech/chain/chain2_multi
+ for lang in '${lang_list[@]}'
+ multi_lores_data_dirs[${lang}]=data/heroico/train_sp
+ multi_data_dirs[${lang}]=data/heroico/train_sp_hires
+ multi_egs_dirs[${lang}]=exp/heroico/egs
+ multi_ali_dirs[${lang}]=exp/heroico
+ multi_ivector_dirs[${lang}]=exp/heroico/ivectors_train_sp_hires
+ multi_ali_treedirs[${lang}]=exp/heroico
+ multi_ali_latdirs[${lang}]=exp/heroico/chain/tri3b_train_sp_lats
+ multi_lang[${lang}]=data/heroico/lang
+ multi_lfmmi_lang[${lang}]=data/heroico/lang_chain
+ multi_gmm_dir[${lang}]=exp/heroico/tri3b
+ multi_chain_dir[${lang}]=exp/heroico/chain/chain2_multi
+ for lang in '${lang_list[@]}'
+ multi_lores_data_dirs[${lang}]=data/wsj/train_sp
+ multi_data_dirs[${lang}]=data/wsj/train_sp_hires
+ multi_egs_dirs[${lang}]=exp/wsj/egs
+ multi_ali_dirs[${lang}]=exp/wsj
+ multi_ivector_dirs[${lang}]=exp/wsj/ivectors_train_sp_hires
+ multi_ali_treedirs[${lang}]=exp/wsj
+ multi_ali_latdirs[${lang}]=exp/wsj/chain/tri3b_train_sp_lats
+ multi_lang[${lang}]=data/wsj/lang
+ multi_lfmmi_lang[${lang}]=data/wsj/lang_chain
+ multi_gmm_dir[${lang}]=exp/wsj/tri3b
+ multi_chain_dir[${lang}]=exp/wsj/chain/chain2_multi
+ for lang in '${lang_list[@]}'
+ multi_lores_data_dirs[${lang}]=data/sprakbanken/train_sp
+ multi_data_dirs[${lang}]=data/sprakbanken/train_sp_hires
+ multi_egs_dirs[${lang}]=exp/sprakbanken/egs
+ multi_ali_dirs[${lang}]=exp/sprakbanken
+ multi_ivector_dirs[${lang}]=exp/sprakbanken/ivectors_train_sp_hires
+ multi_ali_treedirs[${lang}]=exp/sprakbanken
+ multi_ali_latdirs[${lang}]=exp/sprakbanken/chain/tri3b_train_sp_lats
+ multi_lang[${lang}]=data/sprakbanken/lang
+ multi_lfmmi_lang[${lang}]=data/sprakbanken/lang_chain
+ multi_gmm_dir[${lang}]=exp/sprakbanken/tri3b
+ multi_chain_dir[${lang}]=exp/sprakbanken/chain/chain2_multi
+ '[' 14 -le 7 ']'
+ '[' 14 -le 8 ']'
+ '[' 14 -le 9 ']'
+ '[' 14 -le 10 ']'
+ '[' 14 -le 11 ']'
+ '[' -z ']'
+ echo 'ERROR: Cannot find entry for model_left_context in exp/chain2_multi/init/info.txt'
ERROR: Cannot find entry for model_left_context in exp/chain2_multi/init/info.txt
+ '[' -z ']'
+ echo 'ERROR: Cannot find entry for model_right_context in exp/chain2_multi/init/info.txt'
ERROR: Cannot find entry for model_right_context in exp/chain2_multi/init/info.txt
+ egs_left_context=51
+ egs_right_context=1
+ '[' 14 -le 12 ']'
+ '[' 14 -le 13 ']'
+ '[' 14 -le 14 ']'
+ echo './run.sh: Combining egs'
./run.sh: Combining egs
+ local/combine_egs.sh --cmd 'run.pl --mem 2G' --lang-to-weight 0.2,0.2,0.2,0.2,0.2 5 exp/chain2_multi/tunisian_msa_processed_egs exp/chain2_multi/mini_librispeech_processed_egs exp/chain2_multi/heroico_processed_egs exp/chain2_multi/wsj_processed_egs exp/chain2_multi/sprakbanken_processed_egs exp/chain2_multi/egs
local/combine_egs.sh --cmd run.pl --mem 2G --lang-to-weight 0.2,0.2,0.2,0.2,0.2 5 exp/chain2_multi/tunisian_msa_processed_egs exp/chain2_multi/mini_librispeech_processed_egs exp/chain2_multi/heroico_processed_egs exp/chain2_multi/wsj_processed_egs exp/chain2_multi/sprakbanken_processed_egs exp/chain2_multi/egs
local/combine_egs.sh --cmd run.pl --mem 2G --lang-to-weight 0.2,0.2,0.2,0.2,0.2 5 exp/chain2_multi/tunisian_msa_processed_egs exp/chain2_multi/mini_librispeech_processed_egs exp/chain2_multi/heroico_processed_egs exp/chain2_multi/wsj_processed_egs exp/chain2_multi/sprakbanken_processed_egs exp/chain2_multi/egs
local/combine_egs.sh: invalid option --lang-to-weight
